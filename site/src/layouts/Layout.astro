---
import '../styles/global.css';
import CookieBanner from '../components/gdpr/CookieBanner.astro';
import ConsentManager from '../components/gdpr/ConsentManager.astro';
import GdprFooter from '../components/gdpr/GdprFooter.astro';
import GoogleAnalytics from '../components/GoogleAnalytics.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description = 'Behavioral interview preparation guide for engineering management and technical leadership roles.' } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/?$/, '/');
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <title>{title} | EM Behavioral PrepKit</title>
  </head>
  <body class="min-h-screen">
    <!-- Nav -->
    <nav class="sticky top-0 z-50 glass border-b border-white/8">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">
        <a href={base} class="flex items-center gap-2 group">
          <span class="text-2xl">ðŸŽ“</span>
          <span class="font-bold text-white text-lg tracking-tight group-hover:gradient-text transition-all">EM Behavioral PrepKit</span>
        </a>
        <div class="flex items-center gap-4">
          <a href={`${base}#categories`} class="text-sm text-slate-400 hover:text-white transition-colors hidden sm:block">Categories</a>
          <a
            href="https://github.com/chitamoor/interview-prep#contributing"
            target="_blank"
            rel="noopener noreferrer"
            class="text-sm text-slate-400 hover:text-white transition-colors hidden sm:block"
          >
            Contribute
          </a>
          <a
            href="https://tech.chitamoor.com/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-sm text-slate-400 hover:text-white transition-colors hidden sm:block"
          >
            Tech Blog
          </a>
          <a
            href="https://tech.chitamoor.com/posts/2026-02-19---building-an-interview-prep-site-with-ai/"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors hidden sm:flex"
          >
            Behind the Build
          </a>
        </div>
      </div>
    </nav>

    <!-- Page content -->
    <main>
      <slot />
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/8 mt-20">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 py-10 flex flex-col sm:flex-row items-center justify-between gap-4">
        <div class="text-slate-500 text-sm">
          EM Behavioral PrepKit Â· 127 questions Â· 14 categories
        </div>
        <a
          href="https://github.com/chitamoor/interview-prep"
          target="_blank"
          rel="noopener noreferrer"
          class="text-slate-500 hover:text-white text-sm transition-colors"
        >
          github.com/chitamoor/interview-prep
        </a>
      </div>
      <!-- GDPR links -->
      <div class="max-w-6xl mx-auto px-4 sm:px-6 pb-8">
        <GdprFooter />
      </div>
    </footer>

    <!-- GDPR: Cookie consent banner & preferences dialog (rendered on every page) -->
    <CookieBanner />
    <ConsentManager />
    <!-- GA: only activates after analytics consent is granted -->
    <GoogleAnalytics />
  </body>
</html>
